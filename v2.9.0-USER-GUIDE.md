# ğŸ“± De Grazia Automotores v2.9.0 - GuÃ­a de Uso

## ğŸ¯ QuÃ© es nuevo en v2.9.0

### âœ¨ VersiÃ³n MÃ³vil Optimizada
Tu aplicaciÃ³n ahora es **100% responsiva** para celulares. La puedes usar en cualquier pantalla vertical sin problemas.

### ğŸ“¥ Almacenamiento Persistente
- **Fotos de vehÃ­culos**: Se guardan directamente en la base de datos MySQL
- **Documentos de clientes**: DNIs, licencias, comprobantes - todo se almacena permanentemente
- **Archivos de minutas**: PDFs, contratos, documentaciÃ³n - nunca se pierden
- **Nada se borra accidentalmente**: Todo estÃ¡ respaldado en MySQL en Railway

### ğŸ”” Notificaciones de ActualizaciÃ³n
Cuando hay una nueva versiÃ³n disponible, recibirÃ¡s una notificaciÃ³n para actualizar automÃ¡ticamente.

---

## ğŸ“² Usar la App en MÃ³vil

### OpciÃ³n 1: APK Instalada (Recomendado)
1. Instala `app-debug-v2.9.0.apk` en tu Android
2. Abre la app
3. El carrusel de vehÃ­culos rotarÃ¡ automÃ¡ticamente cada 3 segundos
4. Usa los 5 botones inferiores para navegar:
   - ğŸ“Š **Dashboard** - EstadÃ­sticas rÃ¡pidas
   - ğŸš— **Stock** - Ver vehÃ­culos disponibles
   - ğŸ’° **Pagos** - Seguimiento de pagos
   - ğŸ“ˆ **Reportes** - AnÃ¡lisis de ventas
   - ğŸšª **Salir** - Cerrar sesiÃ³n

### OpciÃ³n 2: Web en Navegador
1. Abre `https://concesionaria-app-production.up.railway.app/`
2. O en desarrollo: `http://localhost:4000/`
3. La pÃ¡gina se adapta automÃ¡ticamente a tu pantalla

### OpciÃ³n 3: HTML MÃ³vil Directo
Abre el archivo `public/mobile-responsive.html` en tu navegador mÃ³vil para una experiencia optimizada.

---

## ğŸ’¾ Subir Fotos y Documentos

### Fotos de VehÃ­culos
```
1. Ve a la secciÃ³n "Stock"
2. Selecciona un vehÃ­culo
3. Abre la galerÃ­a (ğŸ“· GalerÃ­a)
4. Sube fotos de exterior, interior, detalles
5. Las fotos se guardan en MySQL automÃ¡ticamente
```

### Documentos de Cliente
```
1. Ve a "Clientes"
2. Selecciona un cliente
3. Sube su DNI, licencia, comprobante de domicilio
4. Los documentos se guardan permanentemente
```

### Archivos de Minuta
```
1. Ve a "Minutas"
2. Selecciona una minuta
3. Sube PDFs, contratos, documentaciÃ³n
4. Los archivos se vinculan permanentemente a esa minuta
```

---

## ğŸ”§ CaracterÃ­sticas TÃ©cnicas

### Base de Datos MySQL
La v2.9.0 crea automÃ¡ticamente estas tablas para almacenar archivos:

| Tabla | PropÃ³sito | MÃ¡x Size |
|-------|-----------|---------|
| `fotografia_vehiculo` | Fotos de vehÃ­culos | 5 MB por foto |
| `documentos_cliente` | Documentos de clientes | 10 MB por documento |
| `archivos_minuta` | PDFs y archivos de minutas | 16 MB por archivo |
| `archivos_generales` | Almacenamiento flexible | Ilimitado |

### Endpoints Nuevos (API v2.9.0)

#### Subir Fotos
```bash
POST /api/vehiculos/{id}/fotos/upload-blob
Content-Type: application/json
{
  "archivo": "base64_encoded_image",
  "tipo_mime": "image/jpeg",
  "nombre": "exterior_delantera",
  "tipo": "exterior"
}
```

#### Descargar Fotos
```bash
GET /api/fotos/{id}/descargar
â†’ Retorna la imagen binaria lista para descargar
```

#### Documentos de Cliente
```bash
POST /api/clientes/{id}/documentos/upload
GET  /api/clientes/{id}/documentos
GET  /api/clientes/{id}/documentos/{docId}/descargar
DELETE /api/clientes/{id}/documentos/{docId}
```

#### Archivos de Minuta
```bash
POST /api/minutas/{id}/archivos/upload
GET  /api/minutas/{id}/archivos
GET  /api/minutas/{id}/archivos/{archivoId}/descargar
DELETE /api/minutas/{id}/archivos/{archivoId}
```

### Endpoint de VersiÃ³n
```bash
GET /api/version
â†’ {
    "version": "2.9.0",
    "timestamp": "2026-01-16T13:28:00Z",
    "updateAvailable": false
  }
```

---

## ğŸ” Seguridad

- âœ… Los archivos se almacenan encriptados en MySQL
- âœ… ValidaciÃ³n de usuario en cada operaciÃ³n
- âœ… Sin exposiciÃ³n de rutas del sistema de archivos
- âœ… Headers Content-Type correctos para descargas
- âœ… TamaÃ±o mÃ¡ximo: 16 MB por archivo

---

## ğŸ“Š Carrusel de VehÃ­culos

El carrusel rotarÃ¡ automÃ¡ticamente cada 3 segundos:
1. **MÃ³vil**: Pantalla completa con puntos indicadores
2. **Desktop**: Grid de vehÃ­culos con carrusel en cada tarjeta
3. **Fade transition**: TransiciÃ³n suave entre fotos

```html
<!-- En mobile-responsive.html -->
<div class="carrusel-container">
  <img class="carrusel-image" src="foto1.jpg">
  <div class="carrusel-dots">
    <span class="dot active"></span>
    <span class="dot"></span>
  </div>
</div>
```

---

## ğŸš€ Deployment

### Railway Auto-Deploy
Todos los cambios se suben automÃ¡ticamente a Railway:
1. `git push origin main` en tu computadora
2. Railway detecta cambios
3. API se redeploy en 2-3 minutos
4. Base de datos MySQL se actualiza automÃ¡ticamente

**URL en vivo**: https://concesionaria-app-production.up.railway.app/

### Compilar APK Localmente
```bash
cd android
./gradlew clean assembleDebug
# APK generado en: app/build/outputs/apk/debug/app-debug.apk
```

---

## âš™ï¸ ConfiguraciÃ³n

### Archivos Importante
```
/Users/macbookair/Desktop/concesionaria-app/
â”œâ”€â”€ server.js                    # API Node.js (updater a v2.9.0)
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html              # Web version (v2.8.0)
â”‚   â”œâ”€â”€ mobile-responsive.html   # Mobile version (NUEVO)
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ style.css
â”‚   â””â”€â”€ assets/
â”œâ”€â”€ android/                     # Capacitor + Gradle
â”‚   â””â”€â”€ app/build/outputs/apk/debug/app-debug.apk
â”œâ”€â”€ version.txt                  # "2.9.0"
â”œâ”€â”€ v2.9.0-CHANGELOG.md         # Release notes
â””â”€â”€ railway.toml                # Config Railway
```

### Variables de Entorno
```
DATABASE_URL=mysql://user:pass@host/database
PORT=4000
NODE_ENV=production
```

---

## ğŸ†˜ Troubleshooting

### "Foto no se guarda"
- âœ… Verifica que el cliente/vehÃ­culo existe
- âœ… Revisa el tamaÃ±o (mÃ¡x 5 MB)
- âœ… Confirma que la conexiÃ³n a MySQL funciona

### "No se ve el carrusel en mÃ³vil"
- âœ… Abre DevTools (F12) â†’ Responsive Design Mode
- âœ… Selecciona dispositivo mÃ³vil
- âœ… El carrusel deberÃ­a ocupar pantalla completa

### "No recibo notificaciÃ³n de actualizaciÃ³n"
- âœ… La app chequea cada 5 minutos automÃ¡ticamente
- âœ… Espera 5 minutos o recarga manualmente (F5)
- âœ… Revisa la consola del navegador (F12)

### "Documento no se descarga"
- âœ… Verifica que el archivo se subiÃ³ correctamente
- âœ… Revisa el Content-Type en headers
- âœ… Intenta en otro navegador

---

## ğŸ“ˆ PrÃ³ximas Mejoras (v3.0)

- [ ] CompresiÃ³n automÃ¡tica de imÃ¡genes
- [ ] Upload de mÃºltiples archivos
- [ ] Sistema de cachÃ© para carga mÃ¡s rÃ¡pida
- [ ] WebSocket para notificaciones en tiempo real
- [ ] SincronizaciÃ³n offline-first con Service Worker
- [ ] ExportaciÃ³n de reportes a PDF
- [ ] BÃºsqueda avanzada con filtros

---

## ğŸ“ Soporte

Para reportar issues o solicitar mejoras:
1. Escribe el problema en detalle
2. Incluye screenshot o video
3. Revisa que la app estÃ© actualizada a v2.9.0
4. Contacta al equipo de desarrollo

---

## âœ… Checklist de InstalaciÃ³n

- [ ] ActualicÃ© a v2.9.0
- [ ] El APK se instalÃ³ correctamente
- [ ] Puedo iniciar sesiÃ³n en mÃ³vil
- [ ] El carrusel rota cada 3 segundos
- [ ] Puedo subir fotos
- [ ] Las fotos se guardan en MySQL
- [ ] Veo la notificaciÃ³n de actualizaciÃ³n
- [ ] Los documentos persisten (no se borran)

**Felicidades! Tu app estÃ¡ lista para producciÃ³n.** ğŸ‰

---

**VersiÃ³n**: 2.9.0  
**Fecha**: 2026-01-16  
**Ãšltima actualizaciÃ³n**: 2026-01-16 13:28  
**Status**: âœ… LISTO PARA USAR
